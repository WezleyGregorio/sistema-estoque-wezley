{% extends "layout.html" %}

{% block content %}
<div class="header">
    <h1 class="page-title">VisÃ£o Geral</h1>
    <button class="btn btn-primary">
        <i class="ri-refresh-line"></i> Atualizar Dados
    </button>
</div>

<div class="cards-grid">
    <div class="card blue">
        <div class="card-title">Faturamento Total</div>
        <div class="card-value" style="color: var(--neon-blue);">R$ {{ "%.2f"|format(total_faturado) }}</div>
    </div>
    <div class="card purple">
        <div class="card-title">Vendas Realizadas</div>
        <div class="card-value" style="color: var(--neon-purple);">{{ total_vendas_qtd }}</div>
    </div>
    <div class="card green">
        <div class="card-title">Total de Produtos</div>
        <div class="card-value" style="color: var(--neon-green);">{{ total_produtos_cadastrados }}</div>
    </div>
    <div class="card">
        <div class="card-title">Unidades em Estoque</div>
        <div class="card-value">{{ total_unidades_estoque }}</div>
    </div>
</div>

<div class="table-container">
    <div class="header" style="margin-bottom: 15px;">
        <h3 style="margin:0;">ğŸ“œ Ãšltimas Vendas</h3>
        <div>
            <a href="/baixar_relatorio" class="btn" style="border: 1px solid var(--neon-green); color: var(--neon-green); margin-right: 10px;">ğŸ“¥ Baixar Excel</a>
            <a href="/limpar_caixa" class="btn btn-danger" onclick="return confirm('Tem certeza que deseja ZERAR o caixa de hoje?')">ğŸ—‘ï¸ Zerar Caixa</a>
        </div>
    </div>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Data/Hora</th>
                <th>Produto</th>
                <th>Valor</th>
            </tr>
        </thead>
        <tbody>
            {% for venda in historico %}
            <tr>
                <td>#{{ venda[0] }}</td>
                <td>{{ venda[2][8:10] }}/{{ venda[2][5:7] }} Ã s {{ venda[2][11:16] }}</td>
                <td><strong>{{ venda[1] }}</strong></td>
                <td style="color: var(--neon-green); font-weight: bold;">+ R$ {{ "%.2f"|format(venda[3]) }}</td>
            </tr>
            {% else %}
            <tr>
                <td colspan="4" style="text-align: center; color: var(--text-secondary);">Nenhuma venda registrada hoje.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}